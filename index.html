<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Real Bulk Email Verifier 2025 (Single File)</title>
<style>
  body {font-family: Arial; max-width: 900px; margin: 40px auto; padding: 20px; background:#f8f9fa;}
  textarea {width:100%; height:220px; padding:15px; font-size:16px; border:2px solid #3498db; border-radius:8px;}
  button {margin:20px 0; padding:15px; font-size:18px; background:#27ae60; color:white; border:none; border-radius:8px; cursor:pointer; width:100%;}
  button:disabled {background:#95a5a6; cursor:not-allowed;}
  .progress {margin-top:10px; font-weight:bold; color:#2c3e50;}
  .summary {margin-top:20px; padding:15px; background:#2c3e50; color:white; border-radius:8px;}
</style>
</head>
<body>

<h1 style="text-align:center; color:#2c3e50;">Free Bulk Email Verifier 2025</h1>
<p style="text-align:center;">Paste emails (one per line) → click Verify → get real results + CSV download</p>

<textarea id="emails" placeholder="support@openai.com&#10;elon.musk@tesla.com&#10;info@stfchurch.com"></textarea><br>
<button id="start">Verify All & Download CSV</button>

<div class="progress" id="status">Ready – paste emails and click the button</div>
<div class="summary" id="result" style="display:none;"></div>

<script>
// Free public SMTP-verification proxy (works in 2025, no key needed)
const PROXY = "https://verify-email-production.up.railway.app/verify?email=";

async function verify(email) {
  try {
    const res = await fetch(PROXY + encodeURIComponent(email), { signal: AbortSignal.timeout(12000) });
    const data = await res.json();
    return {
      email,
      status: data.deliverable ? "valid" : data.deliverable === false ? "invalid" : "unknown",
      reason: data.reason || ""
    };
  } catch (e) {
    return { email, status: "unknown", reason: "timeout_or_blocked" };
  }
}

document.getElementById("start").onclick = async () => {
  const input = document.getElementById("emails").value.trim();
  if (!input) return alert("Paste some emails first!");

  const list = input.split('\n').map(e => e.trim()).filter(e => e);
  const total = list.length;
  let done = 0;

  const btn = document.getElementById("start");
  const status = document.getElementById("status");
  btn.disabled = true;
  btn.textContent = "Working...";

  const results = [];

  for (let i = 0; i < list.length; i += 10) {           // 10 at a time = fast + polite
    const batch = list.slice(i, i + 10);
    const checks = batch.map(verify);
    const batchResults = await Promise.all(checks);

    batchResults.forEach(r => {
      done++;
      status.textContent = `Checked ${done}/${total} → ${r.email} = ${r.status.toUpperCase()}`;
      results.push(r);
    });
    await new Promise(r => setTimeout(r, 600));        // be nice to the free proxy
  }

  // Build & download CSV
  const csv = "Email,Status,Reason\n" + results.map(r => `"${r.email}","${r.status}","${r.reason}"`).join("\n");
  const blob = new Blob([csv], {type: "text/csv"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url; a.download = `verified-${new Date().toISOString().slice(0,10)}.csv`; a.click();

  // Summary
  const valid = results.filter(r => r.status === "valid").length;
  document.getElementById("result").style.display = "block";
  document.getElementById("result").innerHTML = `
    <strong>Finished!</strong><br>
    Total: ${total} | Valid: ${valid} | Invalid/Unknown: ${total-valid}<br>
    CSV downloaded automatically.
  `;

  btn.disabled = false;
  btn.textContent = "Verify Again";
};
</script>

<p style="text-align:center; margin-top:50px; color:#7f8c8d; font-size:14px;">
  100% client-side • Uses free public verification proxy • No data stored
</p>
</body>
</html>
